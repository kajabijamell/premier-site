{% if section.blocks.size > 0 %}
  <div class="row heading heading--library">
    <div class="col-sm-12">
      {% if section.settings.heading != "" %}
        <h3 class="heading__title" kjb-settings-id="{{ 'heading' | settings_id: section: section }}">{{ section.settings.heading }}</h3>
      {% endif %}
    </div>
  </div>
  <div class="row">
    {% for block in section.blocks %}
      {% assign sales_page = current_site.find_sales_page[block.settings.sales_page_id] %}
      {% if sales_page.currently_owned? %}
      {% else %}
        <div class="col-md-12">
          {% include "sales_page_library" %}
        </div>
      {% endif %}
    {% endfor %}
  </div>
{% endif %}

{% schema %}
  {
    "name": "Recommended Courses",
    "blocks": [
      {
        "type": "sales_page",
        "name": "Recommended Course",
        "elements": [
          {
            "type": "sales_page",
            "id": "sales_page_id",
            "label": "Recommended Course"
          },
          {
            "type": "text",
            "id": "btn_text",
            "label": "Button Text",
            "default": "Add Course"
          },
          {
            "type": "radio",
            "id": "btn_style",
            "label": "Button Style",
            "default": "solid",
            "options": [
              { "label": "Solid", "value": "solid" },
              { "label": "Outline", "value": "outline" }
            ]
          },
          {
            "type": "radio",
            "id": "btn_width",
            "label": "Button Width",
            "default": "block",
            "options": [
              { "label": "Auto", "value": "auto" },
              { "label": "Full Width", "value": "block" }
            ]
          },
          {
            "type": "color",
            "id": "btn_background_color",
            "label": "Button Color",
            "default": "#2e91fc"
          },
          {
            "type": "color",
            "id": "btn_text_color",
            "label": "Button Text Color",
            "default": "#fff",
            "info": "For solid buttons only"
          },
          {
            "type": "header",
            "content": "Card Appearance",
            "style": "subheading"
          },
          {
            "type": "color",
            "label": "Background Color Override",
            "id": "background_color",
            "allow_blank": true
          },
          {
            "type": "color",
            "label": "Text Color Override",
            "id": "text_color",
            "allow_blank": true
          }
        ]
      }
    ],
    "elements": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Recommended Courses"
      }
    ]
  }
{% endschema %}
